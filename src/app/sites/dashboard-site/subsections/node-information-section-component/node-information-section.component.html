<nav class="tabs">
  <button
    (click)="changeView('all')"
    [class.active]="currentView === 'all'">
    View All
  </button>
  <button
    *ngIf="extModules"
    (click)="changeView('system')"
    [class.active]="currentView === 'system'">
    System
  </button>
  <button
    *ngIf="extModules && extModules.ICListenHF"
    (click)="changeView('iclistenhf')"
    [class.active]="currentView === 'iclistenhf'"
  >ICListenHF
  </button>
</nav>

<section class="system-info-site" *ngIf="extModules; else errorTemplate">
  <div class="meta-information" *ngIf="extModules && extModules.rtc">
    <label>{{ 'SYSTEM_INFO_SITE.LAST_UPDATE' | translate }}:
      <span>{{ extModules.rtc.currentTime }}</span></label>
  </div>

  <div class="information-container">
    <div class="information-item"

         *ngIf="(currentView === 'system' || currentView === 'all') &&
         extModules"
    >
      <h2>{{ 'COMMUNICATION_SYSTEM.TITLE' | translate }}</h2>
      <ul>
        <app-storage-monitor-panel
          *ngIf="extModules.storage"
          [data]="extModules.storage"
        ></app-storage-monitor-panel>
        <app-location-monitor-panel
          *ngIf="extModules.location"
          [data]="extModules.location"
        ></app-location-monitor-panel>

        <app-core-temperature-and-operation-mode
          *ngIf="extModules.ambient"
          [data]="{
            coreTemperature: extModules.ambient.temperature,
            operationModeIdx: 2
          }"
        >

        </app-core-temperature-and-operation-mode>

        <app-battery-monitor-panel
          *ngIf="extModules.battery"
          [data]="extModules.battery"
        >
        </app-battery-monitor-panel>

        <app-rtc-monitor-panel
          *ngIf="extModules.rtc"
          [data]="extModules.rtc"
        >
        </app-rtc-monitor-panel>
      </ul>
    </div>

    <div class="information-item"
         *ngIf="
         (currentView === 'iclistenhf' || currentView === 'all') &&
         extModules &&
         extModules.ICListenHF &&
         extModules.ICListenHF.status"
    >
      <h2>{{ 'PAM_DEVICE.ICLISTENHF.TITLE' | translate }}</h2>
      <ul>
        <app-iclisten-device-status-monitor-panel
          [data]="{statusCode: extModules.ICListenHF.status.unitStatus}">
        </app-iclisten-device-status-monitor-panel>
        <app-ambient-monitor-panel
          [data]="{ temperature: extModules.ICListenHF.status.temperature, humidity: extModules.ICListenHF.status.humidity }"
        ></app-ambient-monitor-panel>
        <app-battery-monitor-panel
          [data]="{batteryPercentage: extModules.ICListenHF.status.batteryPercentage, batteryStatus: extModules.ICListenHF.status.batteryStatus}"
        ></app-battery-monitor-panel>


      </ul>
    </div>
  </div>
</section>

<ng-template #errorTemplate>
  <app-warning
    [message]="'Unable to retrieve complete device information. ' + errorMessage">
  </app-warning>
</ng-template>
